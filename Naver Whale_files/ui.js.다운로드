function isScrolledIntoView(e) {
    var a = $(window).scrollTop(),
        n = a + $(window).height(),
        t = $(e).offset().top;
    return t + $(e).height() <= n && t >= a
}
$(document).ready(function() {
    "en" == window.location.pathname.split("/")[1] ? ($(".en .ccHead").load("/en/_temp/_layout-header.html"), $(".en .ccFooter").load("/en/_temp/_layout-footer.html")) : ($(".ccHead").load("/ko/_temp/_layout-header.html"), $(".ccFooter").load("/ko/_temp/_layout-footer.html"));
    var e = $(".fnTab");
    $.each(e, function() {
        $(this).find(".tab_contents").on("click", function() {
            var e = $(this).parent("li").attr("data-tab");
            $(this).parents("ul").children("li").removeClass("current"), $(this).parents(".tabWrap").find(".tabcontent").removeClass("current"), $(this).parent("li").addClass("current"), $("#" + e).addClass("current")
        })
    }), $(document).on("mouseenter", ".ccHead .gnb ul li", function() {
        $(".ccHead .lnb_wrap").stop().slideDown()
    }).on("mouseleave", ".ccHead .lnb_wrap", function() {
        $(".ccHead .lnb_wrap").stop().slideUp()
    }), $(document).on("click", ".ccGnb_m .menu_button, .ccGnb_m .menu-panel-overlay", function() {
        $(".ccGnb_m .menu_button, .ccGnb_m .menu-panel-overlay, .ccGnb_m .menu-panel").toggleClass("is-active")
    }).on("click", ".ccGnb_m .menu-list_arrow", function() {
        var e = $(this).parents("li").hasClass("is-open");
        $(".ccGnb_m .menu-label").removeClass("is-open"), $(this).parents("li").addClass("is-open"), e && $(this).parents("li").removeClass("is-open")
    }), $(".main_download").hide(), $(".whats_new .NewsView_contents p").has("img").css("text-align", "center")
});
var showHideDownloadButton = function(e) {
    var a = !1,
        n = !1;
    $(".main_download").show(), e > 980 ? (a = isScrolledIntoView($("#whale_download_top_button")), n = isScrolledIntoView($("#whale_download_bottom_button")), a && $(".main_download").hide(), n && $(".main_download").hide()) : $(".main_download").hide()
};
$(function() {
    var e = $(".btn_whaledown");
    if (e.length > 0) switch (get_platform()) {
        case "iphone":
        case "ipad":
            e.addClass("ios");
            break;
        case "android":
            e.addClass("android")
    }
	if (location.pathname.match("beta")) {
		 e.removeClass("ios");
		 e.removeClass("android");
	}
});
var whale_download = function() {
	var e = get_platform();
	console.log(e), "macOS" == e ? mac_modal_popup(!0) : get_download_link(e), _track(e)
},
mac_modal_popup = function(e) {
	e ? $("#ModalMac").show() : $("#ModalMac").hide()
},
_track = function(param){
	var event_label = "homepage";
	console.log(param);
	switch(param){
		case "android":		event_label = "homepage|android";	break;
		case "iphone":		event_label = "homepage|ios";	break;
		case "ipad":		event_label = "homepage|ios";	break;
		case "windows":		event_label = "homepage|win";	break;
		case "win64":		event_label = "homepage|win|x64";	break;
		case "win32":		event_label = "homepage|win|x86";	break;
		case "winarm":		event_label = "homepage|win|arm";	break;		
		case "linux":		event_label = "homepage|linux";	break;
		case "macOS":		event_label = "homepage|mac";	break;
		case "macOSm1":		event_label = "homepage|mac|m1";	break;
		case "beta":		event_label = "homepage|beta";	break;
		default:		event_label = "homepage";	break;
	}

	/* ga('send', 'event', 'download', 'clicked', event_label); */
	gtag('event','clicked', {
		'event_category': 'download',
		'event_label': event_label
	});
	fbq("trackCustom", "Whale Download");
},
get_download_link = function(e) {
	var a = "";
	switch (e) {
		case "android":
			a = "https://play.google.com/store/apps/details?id=com.naver.whale&referrer=utm_source%3Dwhale%2520home%26utm_medium%3Ddownload%26utm_campaign%3D";
			break;
		case "iphone":
			a = "https://itunes.apple.com/app/id1374073304?mt=8";
			break;
		case "ipad":
			a = "https://itunes.apple.com/app/id1374073304#?platform=ipad";
			break;
		case "windows":
			a = "https://installer-whale.pstatic.net/downloads/installers/WhaleSetup.exe";
			break;
		case "win64":
			a = "https://installer-whale.pstatic.net/downloads/sa_installers/WhaleSetupX64.exe";
			break;
		case "win32":
			a = "https://installer-whale.pstatic.net/downloads/sa_installers/WhaleSetupX86.exe";
			break;
		case "winarm":
			a = "https://installer-whale.pstatic.net/downloads/sa_installers/WhaleSetupARM64.exe";
			break;		
		case "macOS":
			a = "https://installer-whale.pstatic.net/downloads/installers/NaverWhale.dmg";
			break;
		case "macOSm1":
			a = "https://installer-whale.pstatic.net/downloads/installers/NaverWhaleARM64.dmg";
			break;
		case "linux":
			a = "https://installer-whale.pstatic.net/downloads/installers/naver-whale-stable_amd64.deb";
			break;	
		case "beta":
			a = "https://installer-whale.pstatic.net/downloads/beta/installers/WhaleSetupBeta.exe";
			break;
		default:
			a = "https://installer-whale.pstatic.net/downloads/installers/WhaleSetup.exe"
	}
	location.href = a
},
get_platform = function() {
	var e;
	return navigator.userAgent ? navigator.userAgent.toLowerCase().indexOf("android") >= 0 ? e = "android" : navigator.userAgent.toLowerCase().indexOf("iphone") >= 0 ? e = "iphone" : navigator.userAgent.toLowerCase().indexOf("ipad") >= 0 ? e = "ipad" : 
	navigator.userAgent.toLowerCase().indexOf("win") >= 0 ? e = "win" : 
	navigator.userAgent.toLowerCase().indexOf("win32") >= 0 ? e = "win32" : navigator.userAgent.toLowerCase().indexOf("win64") >= 0 ? e = "win64" :  
	navigator.userAgent.toLowerCase().indexOf("winarm") >= 0 ? e = "winarm" : 
	navigator.userAgent.toLowerCase().indexOf("beta") >= 0 ? e = "beta" : 
	navigator.userAgent.toLowerCase().indexOf("mac") >= 0 ? e = "macOS" :  
	navigator.userAgent.toLowerCase().indexOf("macm1") >= 0 ? e = "macOSm1" : 
	navigator.userAgent.toLowerCase().indexOf("linux") >= 0 ? e = "linux" : e = "win" : e
};